# Диаграмма вариантов использования
![Диаграмма активности: Вход в учётную запись](https://github.com/Chomuske13/Coinkeeper/blob/3e1ad06e21e5abfd1b0e09c15fe837a2183ecc07/docs/mockups/ispol.png)

# Диаграмма вариантов использования: CoinKeeper

## Содержание
1. [Актеры](#1-актеры)
2. [Глоссарий](#2-глоссарий)
3. [Варианты использования](#3-варианты-использования)
   - [3.1 Зарегистрироваться](#31-зарегистрироваться)
   - [3.2 Войти в учетную запись](#32-войти-в-учетную-запись)
   - [3.3 Просматривать финансовую статистику](#33-просматривать-финансовую-статистику)
   - [3.4 Просматривать историю операций](#34-просматривать-историю-операций)
   - [3.5 Управлять операциями](#35-управлять-операциями)
   - [3.6 Управлять категориями](#36-управлять-категориями)
   - [3.7 Выйти из учетной записи](#37-выйти-из-учетной-записи)
   - [3.8 Управлять бюджетами](#38-управлять-бюджетами)
   - [3.9 Просматривать профиль](#39-просматривать-профиль)
   - [3.10 Экспортировать данные](#310-экспортировать-данные)
   - [3.11 Импортировать данные](#311-импортировать-данные)
   - [3.12 Управление системой (для Администратора)](#312-управление-системой-для-администратора)
   - [3.13 Просмотр системной аналитики (для Администратора)](#313-просмотр-системной-аналитики-для-администратора)

## 1. Актеры

| **Актер** | **Описание** |
|-----------|--------------|
| **Гость** | Неаутентифицированный пользователь. Может просматривать демо-статистику и информацию о приложении. |
| **Пользователь** | Аутентифицированный пользователь. Наследует возможности Гостя. Может управлять своими финансами, операциями и бюджетами. |
| **Администратор** | Привилегированный пользователь. Наследует возможности Пользователя. Может управлять системой и просматривать аналитику. |

## 2. Глоссарий

| Термин | Определение |
|--------|-------------|
| **Гость** | Неаутентифицированный пользователь приложения. |
| **Пользователь** | Аутентифицированный зарегистрированный пользователь приложения. |
| **Администратор** | Привилегированный пользователь с правами на управление системой. |
| **Операция** | Финансовая транзакция (доход или расход), внесенная пользователем. |
| **Категория** | Группа для классификации финансовых операций (еда, транспорт, развлечения и т.д.). |
| **Бюджет** | Установленный пользователем лимит расходов по категории на определенный период. |
| **Статистика** | Визуализированные данные о финансовой деятельности пользователя. |
| **Баланс** | Разница между общими доходами и расходами пользователя. |

## 3. Варианты использования

### 3.1 Зарегистрироваться

**Описание:** Вариант использования "Зарегистрироваться" позволяет Гостю создать новую учётную запись в системе.

**Предусловия:** Посетитель находится на странице аутентификации и выбрал опцию "Регистрация".

**Основной поток:**
1. Система отображает форму регистрации, запрашивая email, пароль и подтверждение пароля.
2. Посетитель вводит требуемые данные и подтверждает отправку формы.
3. Система проверяет валидность email, уникальность email в системе, а также соответствие пароля политике безопасности.
4. Система создаёт новую учётную запись, хэширует пароль и автоматически аутентифицирует пользователя.
5. Система перенаправляет Пользователя на главную страницу.
6. Вариант использования завершается.

**Альтернативный поток А1: Данные невалидны**
- Если введённые данные не проходят проверку (email не уникален, пароль слишком простой), система отображает соответствующее сообщение об ошибке.
- Возврат к п.2 основного потока.

**Альтернативный поток А2: Отмена регистрации**
- Посетитель отменяет процесс регистрации до подтверждения.
- Система возвращает Гостя на страницу аутентификации.
- Вариант использования завершается досрочно.

**Постусловия:** Посетитель получает статус "Пользователь" и аутентифицирован в системе.

### 3.2 Войти в учетную запись

**Описание:** Вариант использования "Войти в учетную запись" позволяет Зарегистрированному пользователю аутентифицироваться в системе.

**Предусловия:** Пользователь находится на странице аутентификации.

**Основной поток:**
1. Пользователь вводит свой email и пароль в форму входа.
2. Пользователь подтверждает отправку формы.
3. Система проверяет соответствие введённого пароля хэшу в базе данных.
4. При успешной проверке система создаёт сессию и перенаправляет Пользователя на главную страницу.
5. Вариант использования завершается.

**Альтернативный поток А1: Неверные учётные данные**
- Если email или пароль неверны, система отображает общее сообщение об ошибке аутентификации.
- Возврат к п.1 основного потока.

**Постусловия:** Пользователь аутентифицирован в системе.

### 3.3 Просматривать финансовую статистику

**Описание:** Вариант использования позволяет Гостю или Пользователю просмотреть общую финансовую статистику и графики.

**Предусловия:** Актeр находится в приложении.

**Основной поток:**
1. Актeр переходит на вкладку "Статистика".
2. Система отображает финансовые показатели: текущий баланс, доходы/расходы за период, распределение по категориям.
3. Для аутентифицированных пользователей система показывает персонализированную статистику.
4. Вариант использования завершается.

### 3.4 Просматривать историю операций

**Описание:** Вариант использования позволяет Гостю или Пользователю просмотреть историю финансовых операций.

**Предусловия:** Актор находится в приложении.

**Основной поток:**
1. Актeр переходит на вкладку "История операций".
2. Система отображает список операций, отсортированный по дате. Для каждой операции отображается сумма, тип, категория и дата.
3. Для аутентифицированных пользователей система показывает полную историю их операций.
4. Вариант использования завершается.

### 3.5 Управлять операциями

**Описание:** Вариант использования позволяет Пользователю добавлять, редактировать или удалять финансовые операции.

**Предусловия:** Пользователь аутентифицирован.

**Основной поток:**
1. Пользователь нажимает кнопку "Добавить операцию" на главном экране.
2. Система отображает форму для ввода операции.
3. Пользователь выбирает тип операции (доход/расход), категорию, вводит сумму, дату и опциональный комментарий.
4. Пользователь нажимает кнопку "Сохранить".
5. Система проверяет корректность введенных данных.
6. Система сохраняет операцию и обновляет баланс пользователя.
7. Вариант использования завершается.

**Альтернативный поток А1: Редактирование операции**
- Пользователь выбирает существующую операцию из истории.
- Система отображает форму с предзаполненными данными.
- Пользователь изменяет необходимые поля и сохраняет изменения.

**Альтернативный поток А2: Удаление операции**
- Пользователь выбирает операцию и нажимает "Удалить".
- Система запрашивает подтверждение удаления.
- После подтверждения система удаляет операцию и корректирует баланс.

### 3.6 Управлять категориями

**Описание:** Вариант использования позволяет Пользователю создавать, редактировать и удалять категории для операций.

**Предусловия:** Пользователь аутентифицирован.

**Основной поток:**
1. Пользователь переходит в раздел "Настройки" → "Категории".
2. Система отображает список существующих категорий.
3. Пользователь нажимает "Добавить категорию".
4. Пользователь вводит название категории, выбирает тип (доход/расход) и иконку.
5. Система сохраняет новую категорию.
6. Вариант использования завершается.

### 3.7 Выйти из учетной записи

**Описание:** Вариант использования позволяет Пользователю завершить сеанс работы в системе.

**Предусловия:** Пользователь аутентифицирован.

**Основной поток:**
1. Пользователь нажимает кнопку "Выход" в меню профиля.
2. Система завершает сессию пользователя.
3. Система перенаправляет пользователя на главную страницу в режиме Гостя.
4. Вариант использования завершается.

### 3.8 Управлять бюджетами

**Описание:** Вариант использования позволяет Пользователю устанавливать и отслеживать бюджетные лимиты по категориям.

**Предусловия:** Пользователь аутентифицирован.

**Основной поток:**
1. Пользователь переходит в раздел "Бюджеты".
2. Система отображает текущие бюджетные лимиты и прогресс по ним.
3. Пользователь нажимает "Добавить бюджет".
4. Пользователь выбирает категорию, устанавливает лимит и период действия.
5. Система сохраняет бюджет и начинает отслеживание расходов.
6. Вариант использования завершается.

**Альтернативный поток А1: Превышение бюджета**
- При превышении установленного лимита система отправляет уведомление пользователю.
- Система выделяет превышенные бюджеты в интерфейсе.

### 3.9 Просматривать профиль

**Описание:** Вариант использования позволяет Пользователю просмотреть сводную информацию о своих финансах.

**Предусловия:** Пользователь аутентифицирован.

**Основной поток:**
1. Пользователь переходит в свой профиль.
2. Система отображает общую статистику: текущий баланс, доходы/расходы за текущий месяц, прогресс по бюджетам.
3. Система показывает историю операций и финансовые цели.
4. Вариант использования завершается.

### 3.10 Экспортировать данные

**Описание:** Вариант использования позволяет Пользователю экспортировать свои финансовые данные.

**Предусловия:** Пользователь аутентифицирован.

**Основной поток:**
1. Пользователь переходит в "Настройки" → "Экспорт данных".
2. Пользователь выбирает период и формат экспорта (CSV, PDF, Excel).
3. Система формирует файл с данными и предоставляет его для скачивания.
4. Вариант использования завершается.

### 3.11 Импортировать данные

**Описание:** Вариант использования позволяет Пользователю импортировать финансовые данные из внешних источников.

**Предусловия:** Пользователь аутентифицирован.

**Основной поток:**
1. Пользователь переходит в "Настройки" → "Импорт данных".
2. Пользователь выбирает файл для импорта (поддерживаемые форматы).
3. Система проверяет корректность данных и импортирует операции.
4. Вариант использования завершается.

### 3.12 Управление системой (для Администратора)

**Описание:** Вариант использования позволяет Администратору управлять настройками системы и пользователями.

**Предусловия:** Пользователь аутентифицирован и имеет роль "Администратор".

**Основной поток:**
1. Администратор переходит в панель управления.
2. Система отображает интерфейс для управления системными настройками.
3. Администратор может управлять пользователями, настройками приложения, резервными копиями.
4. Система сохраняет изменения.
5. Вариант использования завершается.

### 3.13 Просмотр системной аналитики (для Администратора)

**Описание:** Вариант использования позволяет Администратору просматривать аналитику использования приложения.

**Предусловия:** Пользователь аутентифицирован и имеет роль "Администратор".

**Основной поток:**
1. Администратор переходит в раздел "Аналитика".
2. Система отображает метрики использования приложения: активность пользователей, популярные функции, статистику ошибок.
3. Администратор может фильтровать данные по периодам.
4. Вариант использования завершается.

**Постусловия:** Администратор получает информацию для принятия решений по развитию приложения.
